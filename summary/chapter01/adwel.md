# Chapter 01 마이크로서비스란?

```
마이크로 서비스, 모놀리스 두 아키텍쳐의 주요 개념을 이해하고 장,단점을 비교
또 어떤 상황에서 마이크로 서비스로의 전환이 필요할지 고민해보자
```

## 모놀리스 아키텍쳐
애플리케이션이 하나의 단일 코드베이스에서 관리되는 구조를 의미  
만약 어플리케이션이 분리 되어 있어도 서비스 개발, 배포 과정에서 동일하게 릴리즈 되어야만 한다면 모놀리스로 간주


### 종류

- 단일 프로세스형 모놀리스
    - 모든 기능이 하나의 단일 코드베이스로 통합된 구조

- 모듈식 모놀리스
    - 모놀리스 아키텍쳐의 좋은 예 
    - 단순성과 응집력은 높일 수 있지만 결합도는 낮출 수 있음
    - 향후 마이크로서비스로의 전환에 유리

- 분산형 모놀리스
    - 서비스는 분리되어 있지만 강한 결합 
    - 독립적인 서비스처럼 동작하지 않음
    - 전체 시스템을 함께 배포해야 하는 구조

### 장점
- 개발자의 워크 플로우가 단순 해짐
- 소규모 개발조직에서 효율적으로 개발할 수 도 있음
- 문제 해결, 모니터링이 비교적 쉬움
- 테스트 작성 및 실행이 쉬어짐

### 단점
- 시스템에 대한 경계, 소유권이 희미 해져 혼선 발생(전달 경합)
- 모든 서비스 배포 단위가 일치해야함
- 장애가 연속적으로 일어남, 고가용성을 보장 할 수 없음


## 마이크로 서비스 아키텍쳐
복잡성과 규모가 커질수록 모듈리스 시스템 확장성과 유지보수의 어려움이 나타남  
이를 해결하기 서비스 지향 아키텍처(SOA)등장, 이후 더욱 세분화된 마이크로서비스 아키텍처로 발전

### 핵심개념
- 독립적인 배포성을 보장해야 함
    - 모놀리스와 가장 큰 차이점 및 중요시 되는 개념
    - 독립된 배포는 서비스간의 느슨한 결합을 도와줌

- 정보은닉, 캡슐화 기반으로 서비스를 설계
    - 객체지향으로 구조를 설계할 수 있게 도와줌

- 독립된 데이터 베이스 및 저장소 사용

- 비즈니스 중심으로 서비스의 경계를 정의
- 느슨한 결합 강한 응집력
    - 안정적인 서비스를 만들 수 있는 주요 개념

### 장점
- DDD의 장점을 잘 활용할 수 있는 환경을 제공
- 새로운 기술 채택 및 프레임워크 변경에 대한 영향도가 적음
- 서비스 장애가 연속적으로 발생할 확률이 적어짐
- 트래픽 확장에 따른 인스턴스의 확장이 유연함
- 서비스의 경계를 정의 그에 따른 조직 분리 가능

### 단점
- 기술 과다로 인한 병목 현상 및 비용이 발생 할 수 있음
- 서비스 간 통신 규약 문제 밎 지연 발생
- 모든 서비스를 관찰해야 하는 모니터링, 관리자 서비스 개발이 어려움
- 데이터베이스가 달라 데이터 일관성이 보장되지 않음
## 마이크로 서비스 전환 고려
마이크로 서비스는 이미 증면된 좋은 아키텍쳐 하지만  
DDD와 SOA로 느슨한 결합, 강한 응집력을 바탕으로 안정적인 서비스 가능  
마이크로 서비스로 바꿔야할 확실한 이유를 찾는 것이 중요


### 독립적인 릴리즈의 장점을 누릴 수 있는가?
독립적인 릴리즈는 DDD와 SOA와 다른 마이크로 서비스만 주요 장점
독립적인 배포는 확장성, 유지보수에 대한 자율성을 높일 수 있음  
또한 여러 어플리케이션으로 동작하는 통합 서비스라면 배포 일정이 일치 하지 않아도 됨

### 서비스 공급 방식은 어떠한지?
24시간 연중무휴로 작동해야 하는 서비스는 변경 사향을 배포해야 할 때 어려움이 있음  
독립적인 배포가 가능한 마이크로 서비스가 적합할 수 있음

### 안정적인 서비스 경계 정의가 되어 있나?
도메인 모델이 충분히 안정화 되어 있지 않아 새로운 기능을 위해 둘 이상의 어플리케이션을 릴리즈 해야 한다면  
이는 모놀리스보다 더 많은 작업을 필요하게 됨 따라서 서비스가 안정화 되어 있고 경계가 어느정도 정의 되어 있어야 함

### 비용 문제는 없는지?
마이크로 서비스는 인력 및 기술과다로 인한 비용이 요구 되기 때문에 개발하는 과정에서 병목현상이 발생 할 수 있음
따라서 시장에 신속하게 대응, 개발해야 하는 조직에는 적합 하지 않음  
또 트래픽이 많지 않다면 서버가 늘어나는게 오히려 부담이 될 수 있음