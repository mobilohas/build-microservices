# 진화하는 아키텍처

## 이름에 내포된 것은?
- 아키텍트는 주로 조직에서 개발하는 소프트웨어에 도움이 되는 기술적 비전제시하고 시스템에 통합되는 일을 담당
- 소프트웨어의 역사가 오래되지 않아 아키텍트의 역할을 명확히 규정하기 어렵고 무엇이 좋은 소프트웨어인지 판단하기 어려움
- 산업에 역사가 길지 않아 업계가 동의할 수 있는 절대적인 기준이 훨씩 적음
- 소프트웨어 구조는 현실세계에 존재하는 구조(건축 등등..)보다 훨씬 더 변경하기 쉬움

## 소프트웨어 아키텍트란?
- 성공적인 소프트웨어는 보편적으로 개발자들이 시스템이 구성 요소와 그 요소들이 상호작용하는 인터페이스를 잘 알고 있음
- 개발자들은 아키텍트의 구조를 모를 수 있지만 전체 시스템에서는 매우 중요할 역할을 하기도 함

## 변화를 가능하게
- 보편적 공간이라는 이론에 근거하여 용도에 따라 재구성할 수 있는 공간을 설계하는 것이 중요하다. (특정 목적에 맞게 설계하지 않고 호환성을 생각해야 함)
- 용도가 변경되어도 최대한 유연하게 사용할 수 있어야 함을 의미하여 이를 소프트웨어 아키텍처에 적용해야 함

## 아키텍처에 대한 진화하는 비전
- 소프트웨어에서 사용하는 도구와 기술, 아키텍트는 매우 빠르게 변화하기 때문에 끝없이 진화해야 함
- 최종 결과물이 아닌 계속 성장할 수 있는 프레임워크를 만드는데 집중해야 함
- 아키텍트는 큰 틀을에서 방향을 설정하고 제한된 경우에만 세부사항에 관여함으로 건축가보단 도시 설계자에 가까움

## 시스템 경계 정의
- 아키텍트는 마이크로서비스 내부에서 일어나는 일보다 상호작용에 대해 좀더 고민해야 함
- 구체적인 경계를 정의하고 좀 더 유연한 시스템을 만들 수 있어야 함(보편적 공간)
- 상호작용이 변경되지 않는 한 마이크로서비스 경계 내부의 변경은 쉬움
- 시스템 경계를 잘 정의하여 업무를 수행하기 좋은 환경울 제공해야 함

## 사회적 구조물
- 개발하는 과정에서 예상치 못한 상황에 마주하거나 제한된 환경이 있을 수 있음 
- 따라서 아키텍처는 계획하는 것이 아니라 만들어 가는 것임
- 아키텍처를 구현하려면 많은 사람의 작업과 크고 작은 수 많은 결정이 필요함

## 거주 가능성
- 개발자가 코드의 구조와 의도를 이해한 후에 자신있게 변경할 수 있는 환경을 제공해야 함
- 팀에 따라 기술을 선택해야 하며 실제 작업을 이해하기 위해서 같이 작업하는 시간도 필요

## 원칙적 접근법
- 시스템 설계에서 의사결정을 내리는 것은 결국 절충점에 관한 것
- 달성하려는 목표에 따라 의사결정을 인도하는 일련의 원칙과 관행을 정희하는 것이 틀을 잡는 가장 좋은 방법

### 전략적 묙표
- 회사나 부서 수준에서 나아가고자 하는 방향을 정의하여 의사 결정
- 기술적인 의사 결정과는 거리가 멀 수 있으나 기술이 부합하는지 확인해야 함

### 원칙
- 현재 목표를 달성하기 위해 만든 규칙, 주로 팀내에서 정의할 수 있고 기술적인 내용이 포함 됨
- 너무 많은 원칙을 수립하는 것은 바람직 하지 않을 수 있음 (겹치거나 모순이 발생)

### 관행
- 원칙이 제대로 이루어 지고 있는지 확인 하는 방법으로 업무 수행을 위한 실용적인 지침
- 기술적 특성으로 인해 관행은 일반적으로 원칙보다 자주 바뀔 수 있음
- 코딩 지침, 데이터 통신, 로깅 방식 등 자세한 수준이어야 함

### 원칙과 관행의 결합
- 원칙과 관행의 경계가 모호할 수 있지만 핵심은 시스템의 발전 방법을 이끄는 것
- 중요한 아이디어를 팀과 공유해야 하며 모두가 알 수 있도록 상세하게 설명해야 함

## 진화하는 아키텍처의 가이드
- 끈임없이 변화하고 진화하는 아키텍처를 유연하게 성장시키고 발전하려면 적합성 함수 개념이 필요
- 적합성 함수는 무엇이 더 나은지 언제 목표가 달성되는지 측정하는데 도움 됨
- 적합성 달성 여부를 파악하면 아키텍트가 개입해야 할 부분을 알수 있도 발전을 위한  정보 출처 역할을 할 수 있음
- 방향성이 옳은지 판단하기 위한 좋은 방법이지만 실제 팀원 들과 대화하는 것을 대채할 수는 없음 (대화가 중요)

## 스트림 정렬 조직의 아키텍처
- 때로는 스트림 정렬 팀내에서 아키텍트가 필요할 수 있음 하지만 아키텍트는 여러 팀에서 업무를 수행해야 함
- 아키텍트는 새로운 과제를 파악하고 그에 따라 기술 비전을 적절히 조정하는데 도움을 주어야 함
- 아키텍트와 팀은 대립될 수 있으며 때로는 아키텍트가 동의하지 않는 결정을 따르는 것이 옳을 때도 있음 (팀원들의 결정을 존중)
- 너무 많은 개입을 하게 되면 팀의 발전을 저해할 수도 있음

## 팀 구축
- 기술 리더는 사람들이 성장하도록 지원하고, 비전을 형성하고 구현하는 데도 적극적으로 참여할 수 있도록 역할을 해야 함
- 마이크로서비스에서는 독립적인 수명주기를 갖는 여러 개의 소유권이 있고, 책임감을 갖게 함으로 개발자들의 성장을 도울 수 있다.

## 필수 기준
- 마이크로 서비스간 절충점을 고려할 때 가장 중요한 균형 중 하나는 얼마나 많은 가변성을 허용할 것인지와 관련됨
- 너무 많은 차이를 허용하면 문제가 발생할 수 있으며 자율성을 최적화할 수 있는 균형점을 찾아야 함

### 모니터링
- 시스템 상태에 대한 일관된 서비스 교차 뷰를 만들수 있어야 함 
- 마이크로서비스 상태 관련 메트릭과 일반 모니터링 관련 메트릭을 동일한 방식으로 처리한는 것이 좋음

### 인터페이스
- 소수의 정의된 인터페이스 기술을 선택하면 새로운 소비자(서비스)를 통합하는데 도움 됨
- 단순히 기술과 프로토콜 문제가 아닌 네이밍, 페이지네이션과 같은 내용이 있을 수 있음

### 아키텍처 안전
- 마이크로서비스는 다운스트림 호출의 장애로부터 스스로를 보호할 수 있어야 함
- 서비스 간 통신과 관련해 회로 차단기 사용을 의무화 하는 것처럼 특정 관행을 강제하는 방법이 있음

## 거버넌서와 포장된 길
- 방향성을 설정하고 합의된 방향에대한 성과, 규정준수, 진행상황을 파악하여 목표를 달성해야 함
- 아키텍트는 기술적 비전을 확보하고 거버넌스는 그것이 이 비전과 일치하는지 확인하고 발전시키는 것
- 거버넌스는 그룹활동이며, 함께 협력해 작업을 공유하고 비전을 구체화할 수 있음
- 해결해야 할 요구사항을 구체화하여 목표에 쉽게 도달할 수 있도록 아키텍트를 잘 설계해야 함

### 예시
- 문서보단 권장하고 싶은 표준이나 모범 사례 처럼 참고할 만한 예시를 제공하는 것이 좋음

### 맞춤형 마이크로서비스 템플릿
- 프레임 워크를 사용하여 마이크로서비스를 템플릿화 할 수 있음
- 하지만 프레임워크를 강요하면 생산성이 저하 될 수 있고 기술 의존도가 커질 수 있음
- 공유코드의 위험성을 인식하며 강력한 결합이 발생하지 않도록 해야 함

### 대규모로 포장된 길
- 조직내 기술 스택이 많아지면 더많은 마이크로서비스 템플릿(프레임워크)이 필요하며 반복 작업이 계속 생길 수 있음
- 서비스 메시를 사용하여 서로 다른 기술로 구현된 서비스의 일관성을 어느정도 보장할 수 있음

## 기술 부채
- 아키텍트는 큰 그림을 보고 비즈니스와 기술부채 사이에 균형을 이해하고 있어야 함
- 부채를 추적하고 상환하는 방법을 제시하며 어느정도 견해를 갖고 있어야 함

## 예외 처리
- 당면한 문제를 해결하도록 최대한의 자유를 부여하는 것이 중요 
- 현재 보유한 기술스택으로 한계가 있다면 어느정도 다른 기술을 적용할 수 있는 환경이여야 함
- 개발자의 업무 수행방식에 많은 제한을 두는 조직에서 일하고 있다면 마아크로서비스가 적합하지 못할 수 있음
